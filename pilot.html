---
layout: pilot
title: The Pilot
description: 
---

<div class="tab-content">
  {% include research.html %}
  {% include curation.html %}
  {% include targeting.html %}
  {% include measurement.html %}
</div>

<script>
$(document).on('ready', function(){
  $('.sidenav').stickit({
    screenMinWidth: 992,
    scope: StickScope.Document,
    top: 40
  });
  $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
    if($('.left-column').hasClass('open')){
      $('.left-column').removeClass('open');
    }
  })
  // scroll user back up to top of pilot presentation and show next slide
  $('.next').on('click', function(){
    var active_tab = $(this).attr('href');
    var target_scroll = $('#pilot-presentation').offset();
    $('html, body').animate({scrollTop: target_scroll.top}, "slow");
    window.console.log(active_tab);
    $('.sidenav a[href="'+ active_tab +'"]').tab('show')
  });
  // open specific tab on page reload for pilot tabs
  var params = '#' + window.location.search.substring(1);
  window.console.log(params);
  if (params.indexOf('research') > -1 ) {
    window.console.log('true');
  }
  $('a[data-toggle="tab"]').each(function(){
    var target_scroll = $('#pilot-presentation').offset();
    var href = $(this).attr('href');
    window.console.log(href);
    if($(this).attr('href') == params){
      $('html, body').animate({scrollTop: target_scroll.top}, "slow");
      window.console.log('match');
      $(this).tab('show');
    }
  });
  $('.html5-video-player').on('load', function(){
    $('.ytp-playlist-menu-button').trigger('click');
  });

  var $animation = $('#mosaic-wrapper');
  var $window = $(window);
  $window.on('scroll resize', check_if_in_view);
  $window.trigger('scroll');
  
  function check_if_in_view() {
    var window_height = $window.height();
    var window_top_position = $window.scrollTop();
    var window_bottom_position = (window_top_position + window_height);

    $.each($animation, function() {
      var $element = $(this);
      var element_height = $element.outerHeight();
      var element_top_position = $element.offset().top;
      var element_bottom_position = (element_top_position + element_height);

      //check to see if this current container is within viewport
      if ((element_bottom_position >= window_top_position) &&
          (element_top_position <= window_bottom_position)) {
        $element.addClass('in-view');
        $('#mosaic-wrapper.in-view img').each(function(){
          var order = $(this).data('order');
          var vertPos = $(this).data('vert');
          var horizPos = $(this).data('horz');
          var animationDelay = order + 0.5 + 's';
          $(this).removeClass('start').addClass('fadeIn');
          $(this).css({'top' : vertPos, 'left' : horizPos, 'animation-delay' : animationDelay, 'z-index' : order });
        });
      } else {
        $element.removeClass('in-view');
        $('#mosaic-wrapper img').removeClass('fadeIn').addClass('start');
      }
    });
  }
  
});
</script>