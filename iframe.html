---
layout: page
title: The Rami Method | example iframe embed
---

<section>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="customPlayer" data-playlist="M7lc1UVf-VE, z1X-HWPbeD4">
          <div class="videoWrapper">
            <div id="player1" class="player"></div>
          </div>
          <div class="playlist">
            <span class="playlist-details">Playlist Name - 1/3 Videos</span>
            <span class="active-title">Current Video Name</span>
            <ul class="thumbnav"></ul>
          </div>
        </div>
        
      </div>
    </div>
  </div>
</section>

<script>
  var player;

  function validatePlaylist(vids, counter) {
    var video_ids = vids.split(',');
    var playlist = [];
    if(counter === undefined) { counter = 0; } 
    if(counter >= video_ids.length) {return playlist;}

    var api_key = 'AIzaSyAfxAyWYHAqyXjNQ2FaVoOP5YmcSFggtYs';
    $.ajax({
      url: 'https://www.googleapis.com/youtube/v3/videos?id=' + video_ids[counter] + "&key=" + api_key + "&part=id",
      success: function(data) {
        window.console.log(data);
        if (data.items.length > 0) {
          // Display thumbnail
          $('.thumbnav').append("<li class='video-thumb'><img src='http://img.youtube.com/vi/"+data.items[0].id+"/0.jpg''></li>");
        } else {
          window.console.log("INVALID ID");
          // console.log("STATUS:",status);
          // console.log(xhr);
        }
        counter++;
        validatePlaylist(vids, counter);
      }
    });
  }

  // This function creates an <iframe> (and YouTube player) after the API code downloads.
  function onYouTubeIframeAPIReady() {
    $('.customPlayer').each(function() {
      var player_id = $(this).find('.player').first().attr('id'),
          vids = $(this).attr('data-playlist'),
          check = validatePlaylist(vids);
          // window.console.log(check);
      player = new YT.Player(player_id, {
        height: '320',
        width: '640',
        playerVars: {
          playlist: vids
        },
        events: {
          // 'onReady': onPlayerReady,
          // 'onStateChange': onPlayerStateChange
        }
      });
    });
  }

  // The API will call this function when the video player is ready.
  function onPlayerReady(event) {
    event.target.playVideo();
    // event.target.showVideoInfo();
  }

  //    The API calls this function when the player's state changes.
  //    The function indicates that when playing a video (state=1),
  //    the player should play for six seconds and then stop.
  var done = false;
  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING && !done) {
      setTimeout(stopVideo, 6000);
      done = true;
    }
  }
  function stopVideo() {
    player.stopVideo();
  }

  // This code loads the IFrame Player API code asynchronously.
  var tag = document.createElement('script');

  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);


</script>

